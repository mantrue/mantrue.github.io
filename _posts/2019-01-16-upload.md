---
layout: post
title: PHP 使用 Guzzle 上传文件
author: 承鹏辉
category: php
---

```

这个是感觉挺好用的，以前用curl。自从学习了golang就用这个库了
异步请求值得拥有

```

### 表单上传

```
<?php

use GuzzleHttp\Client;

$client = new Client;

$client->request('POST', 'http://foo.com/upload_file', [
    [
        'name' => 'image',
        'contents' => fopen('/home/runner/demo.png', 'r'),
        'filename' => 'avatar.png',
    ],
]);


<?php

use GuzzleHttp\Client;

$client = new Client;

$client->request('POST', 'http://foo.com/upload_file', [
    [
        'name' => 'image',
        'contents' => fopen($_FILES['image']['tmp_name'], 'r'),
        'filename' => 'avatar.png',
        'headers' => [
            'content-type' => $_FILES['image']['type'],
        ]
    ],
]);

在这里, 必须设置 content-type, 否则再次上传的文件, 将无法获取到 mime type

默认的 mime type 是从文件扩展名从获取而来的. 而当使用从 $_FILES 拿到的文件名中并不包含扩展名

	
```



### 个人随笔

```
安静的等待,你若盛开,蝴蝶自来

承接高质量 网站开发 app开发 如有需要请点击About联系

```

作者
@承鹏辉
