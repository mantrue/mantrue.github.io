---
layout: post
title:  go mysql查询操作数据库
author: 承鹏辉
category: go
---

```
go基础练习
go很简洁，像php一样好学
又有很强大的协程
值得好好学习下

查询

```


### 正文

```
package main

import (
	"database/sql"
	"fmt"

	_ "github.com/go-sql-driver/mysql"
)

type Auth struct {
	auth_name string
	create_at int64
	status    int8
}

func main() {

	db, err := sql.Open("mysql", "root:Jby&*2016@tcp(118.190.65.33:3306)/jingtongcloud?charset=utf8")
	if err != nil {
		fmt.Println(err)
	}
	defer db.Close()
	list := GetAuth(db)
	fmt.Println(list)

}

func GetAuth(db *sql.DB) []Auth {
	rows, err := db.Query(`SELECT auth_name,create_at,status FROM account_auth`)
	if err != nil {
		fmt.Println(err)
	}
	defer rows.Close()

	authList := []Auth{}
	authMap := map[int]Auth{}

	i := 0
	for rows.Next() {
		line := Auth{}
		err = rows.Scan(&line.auth_name, &line.create_at, &line.status)
		authMap[i] = line
		authList = append(authList, line)
		i++
	}
	if err := rows.Err(); err != nil {
		fmt.Println(err)
	}
	return authList
}


这个是循环查询多条，可以封装成函数，查询单条，多条

```


### 个人随笔

```
安静的等待,你若盛开,蝴蝶自来

承接高质量 网站开发 app开发 如有需要请点击About联系

```


@承鹏辉
